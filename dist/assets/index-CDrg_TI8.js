(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function o(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(s){if(s.ep)return;s.ep=!0;const n=o(s);fetch(s.href,n)}})();var M,d,he,T,Y,$={},me=[],be=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function x(t,e){for(var o in e)t[o]=e[o];return t}function fe(t){var e=t.parentNode;e&&e.removeChild(t)}function S(t,e,o){var r,s,n,c={};for(n in e)n=="key"?r=e[n]:n=="ref"?s=e[n]:c[n]=e[n];if(arguments.length>2&&(c.children=arguments.length>3?M.call(arguments,2):o),typeof t=="function"&&t.defaultProps!=null)for(n in t.defaultProps)c[n]===void 0&&(c[n]=t.defaultProps[n]);return P(t,c,r,s,null)}function P(t,e,o,r,s){var n={type:t,props:e,key:o,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:s??++he};return s==null&&d.vnode!=null&&d.vnode(n),n}function w(t){return t.children}function U(t,e){this.props=t,this.context=e}function A(t,e){if(e==null)return t.__?A(t.__,t.__.__k.indexOf(t)+1):null;for(var o;e<t.__k.length;e++)if((o=t.__k[e])!=null&&o.__e!=null)return o.__e;return typeof t.type=="function"?A(t):null}function pe(t){var e,o;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((o=t.__k[e])!=null&&o.__e!=null){t.__e=t.__c.base=o.__e;break}return pe(t)}}function Z(t){(!t.__d&&(t.__d=!0)&&T.push(t)&&!H.__r++||Y!==d.debounceRendering)&&((Y=d.debounceRendering)||setTimeout)(H)}function H(){for(var t;H.__r=T.length;)t=T.sort(function(e,o){return e.__v.__b-o.__v.__b}),T=[],t.some(function(e){var o,r,s,n,c,h;e.__d&&(c=(n=(o=e).__v).__e,(h=o.__P)&&(r=[],(s=x({},n)).__v=n.__v+1,Q(h,n,s,o.__n,h.ownerSVGElement!==void 0,n.__h!=null?[c]:null,r,c??A(n),n.__h),ke(r,n),n.__e!=c&&pe(n)))})}function ve(t,e,o,r,s,n,c,h,l,m){var i,f,_,a,u,C,p,y=r&&r.__k||me,k=y.length;for(o.__k=[],i=0;i<e.length;i++)if((a=o.__k[i]=(a=e[i])==null||typeof a=="boolean"?null:typeof a=="string"||typeof a=="number"||typeof a=="bigint"?P(null,a,null,null,a):Array.isArray(a)?P(w,{children:a},null,null,null):a.__b>0?P(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a)!=null){if(a.__=o,a.__b=o.__b+1,(_=y[i])===null||_&&a.key==_.key&&a.type===_.type)y[i]=void 0;else for(f=0;f<k;f++){if((_=y[f])&&a.key==_.key&&a.type===_.type){y[f]=void 0;break}_=null}Q(t,a,_=_||$,s,n,c,h,l,m),u=a.__e,(f=a.ref)&&_.ref!=f&&(p||(p=[]),_.ref&&p.push(_.ref,null,a),p.push(f,a.__c||u,a)),u!=null?(C==null&&(C=u),typeof a.type=="function"&&a.__k===_.__k?a.__d=l=ye(a,l,t):l=ge(t,a,_,y,u,l),typeof o.type=="function"&&(o.__d=l)):l&&_.__e==l&&l.parentNode!=t&&(l=A(_))}for(o.__e=C,i=k;i--;)y[i]!=null&&(typeof o.type=="function"&&y[i].__e!=null&&y[i].__e==o.__d&&(o.__d=A(r,i+1)),Se(y[i],y[i]));if(p)for(i=0;i<p.length;i++)xe(p[i],p[++i],p[++i])}function ye(t,e,o){for(var r,s=t.__k,n=0;s&&n<s.length;n++)(r=s[n])&&(r.__=t,e=typeof r.type=="function"?ye(r,e,o):ge(o,r,r,s,r.__e,e));return e}function ge(t,e,o,r,s,n){var c,h,l;if(e.__d!==void 0)c=e.__d,e.__d=void 0;else if(o==null||s!=n||s.parentNode==null)e:if(n==null||n.parentNode!==t)t.appendChild(s),c=null;else{for(h=n,l=0;(h=h.nextSibling)&&l<r.length;l+=2)if(h==s)break e;t.insertBefore(s,n),c=n}return c!==void 0?c:s.nextSibling}function Te(t,e,o,r,s){var n;for(n in o)n==="children"||n==="key"||n in e||I(t,n,null,o[n],r);for(n in e)s&&typeof e[n]!="function"||n==="children"||n==="key"||n==="value"||n==="checked"||o[n]===e[n]||I(t,n,e[n],o[n],r)}function j(t,e,o){e[0]==="-"?t.setProperty(e,o):t[e]=o==null?"":typeof o!="number"||be.test(e)?o:o+"px"}function I(t,e,o,r,s){var n;e:if(e==="style")if(typeof o=="string")t.style.cssText=o;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)o&&e in o||j(t.style,e,"");if(o)for(e in o)r&&o[e]===r[e]||j(t.style,e,o[e])}else if(e[0]==="o"&&e[1]==="n")n=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+n]=o,o?r||t.addEventListener(e,n?te:ee,n):t.removeEventListener(e,n?te:ee,n);else if(e!=="dangerouslySetInnerHTML"){if(s)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=o??"";break e}catch{}typeof o=="function"||(o!=null&&(o!==!1||e[0]==="a"&&e[1]==="r")?t.setAttribute(e,o):t.removeAttribute(e))}}function ee(t){this.l[t.type+!1](d.event?d.event(t):t)}function te(t){this.l[t.type+!0](d.event?d.event(t):t)}function Q(t,e,o,r,s,n,c,h,l){var m,i,f,_,a,u,C,p,y,k,b,X,z,g=e.type;if(e.constructor!==void 0)return null;o.__h!=null&&(l=o.__h,h=e.__e=o.__e,e.__h=null,n=[h]),(m=d.__b)&&m(e);try{e:if(typeof g=="function"){if(p=e.props,y=(m=g.contextType)&&r[m.__c],k=m?y?y.props.value:m.__:r,o.__c?C=(i=e.__c=o.__c).__=i.__E:("prototype"in g&&g.prototype.render?e.__c=i=new g(p,k):(e.__c=i=new U(p,k),i.constructor=g,i.render=Le),y&&y.sub(i),i.props=p,i.state||(i.state={}),i.context=k,i.__n=r,f=i.__d=!0,i.__h=[]),i.__s==null&&(i.__s=i.state),g.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=x({},i.__s)),x(i.__s,g.getDerivedStateFromProps(p,i.__s))),_=i.props,a=i.state,f)g.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(g.getDerivedStateFromProps==null&&p!==_&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(p,k),!i.__e&&i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(p,i.__s,k)===!1||e.__v===o.__v){i.props=p,i.state=i.__s,e.__v!==o.__v&&(i.__d=!1),i.__v=e,e.__e=o.__e,e.__k=o.__k,e.__k.forEach(function(L){L&&(L.__=e)}),i.__h.length&&c.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(p,i.__s,k),i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(_,a,u)})}if(i.context=k,i.props=p,i.__v=e,i.__P=t,b=d.__r,X=0,"prototype"in g&&g.prototype.render)i.state=i.__s,i.__d=!1,b&&b(e),m=i.render(i.props,i.state,i.context);else do i.__d=!1,b&&b(e),m=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++X<25);i.state=i.__s,i.getChildContext!=null&&(r=x(x({},r),i.getChildContext())),f||i.getSnapshotBeforeUpdate==null||(u=i.getSnapshotBeforeUpdate(_,a)),z=m!=null&&m.type===w&&m.key==null?m.props.children:m,ve(t,Array.isArray(z)?z:[z],e,o,r,s,n,c,h,l),i.base=e.__e,e.__h=null,i.__h.length&&c.push(i),C&&(i.__E=i.__=null),i.__e=!1}else n==null&&e.__v===o.__v?(e.__k=o.__k,e.__e=o.__e):e.__e=ze(o.__e,e,o,r,s,n,c,l);(m=d.diffed)&&m(e)}catch(L){e.__v=null,(l||n!=null)&&(e.__e=h,e.__h=!!l,n[n.indexOf(h)]=null),d.__e(L,e,o)}}function ke(t,e){d.__c&&d.__c(e,t),t.some(function(o){try{t=o.__h,o.__h=[],t.some(function(r){r.call(o)})}catch(r){d.__e(r,o.__v)}})}function ze(t,e,o,r,s,n,c,h){var l,m,i,f=o.props,_=e.props,a=e.type,u=0;if(a==="svg"&&(s=!0),n!=null){for(;u<n.length;u++)if((l=n[u])&&"setAttribute"in l==!!a&&(a?l.localName===a:l.nodeType===3)){t=l,n[u]=null;break}}if(t==null){if(a===null)return document.createTextNode(_);t=s?document.createElementNS("http://www.w3.org/2000/svg",a):document.createElement(a,_.is&&_),n=null,h=!1}if(a===null)f===_||h&&t.data===_||(t.data=_);else{if(n=n&&M.call(t.childNodes),m=(f=o.props||$).dangerouslySetInnerHTML,i=_.dangerouslySetInnerHTML,!h){if(n!=null)for(f={},u=0;u<t.attributes.length;u++)f[t.attributes[u].name]=t.attributes[u].value;(i||m)&&(i&&(m&&i.__html==m.__html||i.__html===t.innerHTML)||(t.innerHTML=i&&i.__html||""))}if(Te(t,_,f,s,h),i)e.__k=[];else if(u=e.props.children,ve(t,Array.isArray(u)?u:[u],e,o,r,s&&a!=="foreignObject",n,c,n?n[0]:o.__k&&A(o,0),h),n!=null)for(u=n.length;u--;)n[u]!=null&&fe(n[u]);h||("value"in _&&(u=_.value)!==void 0&&(u!==t.value||a==="progress"&&!u||a==="option"&&u!==f.value)&&I(t,"value",u,f.value,!1),"checked"in _&&(u=_.checked)!==void 0&&u!==t.checked&&I(t,"checked",u,f.checked,!1))}return t}function xe(t,e,o){try{typeof t=="function"?t(e):t.current=e}catch(r){d.__e(r,o)}}function Se(t,e,o){var r,s;if(d.unmount&&d.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||xe(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(n){d.__e(n,e)}r.base=r.__P=null,t.__c=void 0}if(r=t.__k)for(s=0;s<r.length;s++)r[s]&&Se(r[s],e,typeof t.type!="function");o||t.__e==null||fe(t.__e),t.__=t.__e=t.__d=void 0}function Le(t,e,o){return this.constructor(t,o)}function Pe(t,e,o){var r,s,n;d.__&&d.__(t,e),s=(r=typeof o=="function")?null:e.__k,n=[],Q(e,t=(!r&&o||e).__k=S(w,null,[t]),s||$,$,e.ownerSVGElement!==void 0,!r&&o?[o]:s?null:e.firstChild?M.call(e.childNodes):null,n,!r&&o?o:s?s.__e:e.firstChild,r),ke(n,t)}M=me.slice,d={__e:function(t,e,o,r){for(var s,n,c;e=e.__;)if((s=e.__c)&&!s.__)try{if((n=s.constructor)&&n.getDerivedStateFromError!=null&&(s.setState(n.getDerivedStateFromError(t)),c=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(t,r||{}),c=s.__d),c)return s.__E=s}catch(h){t=h}throw t}},he=0,U.prototype.setState=function(t,e){var o;o=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=x({},this.state),typeof t=="function"&&(t=t(x({},o),this.props)),t&&x(o,t),t!=null&&this.__v&&(e&&this.__h.push(e),Z(this))},U.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Z(this))},U.prototype.render=w,T=[],H.__r=0;var Ee,v,V,oe,q=0,Ce=[],F=[],ne=d.__b,re=d.__r,ie=d.diffed,se=d.__c,ce=d.unmount;function Ue(t,e){d.__h&&d.__h(v,t,q||e),q=0;var o=v.__H||(v.__H={__:[],__h:[]});return t>=o.__.length&&o.__.push({__V:F}),o.__[t]}function Fe(t){return q=1,Ne(Ae,t)}function Ne(t,e,o){var r=Ue(Ee++,2);if(r.t=t,!r.__c&&(r.__=[Ae(void 0,e),function(n){var c=r.__N?r.__N[0]:r.__[0],h=r.t(c,n);c!==h&&(r.__N=[h,r.__[1]],r.__c.setState({}))}],r.__c=v,!v.u)){v.u=!0;var s=v.shouldComponentUpdate;v.shouldComponentUpdate=function(n,c,h){if(!r.__c.__H)return!0;var l=r.__c.__H.__.filter(function(i){return i.__c});if(l.every(function(i){return!i.__N}))return!s||s.call(this,n,c,h);var m=!1;return l.forEach(function(i){if(i.__N){var f=i.__[0];i.__=i.__N,i.__N=void 0,f!==i.__[0]&&(m=!0)}}),!!m&&(!s||s.call(this,n,c,h))}}return r.__N||r.__}function De(){for(var t;t=Ce.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(N),t.__H.__h.forEach(O),t.__H.__h=[]}catch(e){t.__H.__h=[],d.__e(e,t.__v)}}d.__b=function(t){typeof t.type!="function"||t.o||t.type===w?t.o||(t.o=t.__&&t.__.o?t.__.o:""):t.o=(t.__&&t.__.o?t.__.o:"")+(t.__&&t.__.__k?t.__.__k.indexOf(t):0),v=null,ne&&ne(t)},d.__r=function(t){re&&re(t),Ee=0;var e=(v=t.__c).__H;e&&(V===v?(e.__h=[],v.__h=[],e.__.forEach(function(o){o.__N&&(o.__=o.__N),o.__V=F,o.__N=o.i=void 0})):(e.__h.forEach(N),e.__h.forEach(O),e.__h=[])),V=v},d.diffed=function(t){ie&&ie(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Ce.push(e)!==1&&oe===d.requestAnimationFrame||((oe=d.requestAnimationFrame)||Re)(De)),e.__H.__.forEach(function(o){o.i&&(o.__H=o.i),o.__V!==F&&(o.__=o.__V),o.i=void 0,o.__V=F})),V=v=null},d.__c=function(t,e){e.some(function(o){try{o.__h.forEach(N),o.__h=o.__h.filter(function(r){return!r.__||O(r)})}catch(r){e.some(function(s){s.__h&&(s.__h=[])}),e=[],d.__e(r,o.__v)}}),se&&se(t,e)},d.unmount=function(t){ce&&ce(t);var e,o=t.__c;o&&o.__H&&(o.__H.__.forEach(function(r){try{N(r)}catch(s){e=s}}),o.__H=void 0,e&&d.__e(e,o.__v))};var ae=typeof requestAnimationFrame=="function";function Re(t){var e,o=function(){clearTimeout(r),ae&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(o,100);ae&&(e=requestAnimationFrame(o))}function N(t){var e=v,o=t.__c;typeof o=="function"&&(t.__c=void 0,o()),v=e}function O(t){var e=v;t.__c=t.__(),v=e}function Ae(t,e){return typeof e=="function"?e(t):e}const $e="modulepreload",He=function(t,e){return new URL(t,e).href},_e={},Ie=function(e,o,r){let s=Promise.resolve();if(o&&o.length>0){const n=document.getElementsByTagName("link"),c=document.querySelector("meta[property=csp-nonce]"),h=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));s=Promise.all(o.map(l=>{if(l=He(l,r),l in _e)return;_e[l]=!0;const m=l.endsWith(".css"),i=m?'[rel="stylesheet"]':"";if(!!r)for(let a=n.length-1;a>=0;a--){const u=n[a];if(u.href===l&&(!m||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${i}`))return;const _=document.createElement("link");if(_.rel=m?"stylesheet":$e,m||(_.as="script",_.crossOrigin=""),_.href=l,h&&_.setAttribute("nonce",h),document.head.appendChild(_),m)return new Promise((a,u)=>{_.addEventListener("load",a),_.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${l}`)))})}))}return s.then(()=>e()).catch(n=>{const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=n,window.dispatchEvent(c),!c.defaultPrevented)throw n})},Me=[{name:"English",code:"en",icon:""},{name:"French",code:"fr",icon:""},{name:"German",code:"de",icon:""},{name:"Chinese",code:"zh",icon:""},{name:"Arabic",code:"ar",icon:""},{name:"Breton",code:"br",icon:""},{name:"Catalan",code:"ca",icon:""},{name:"Czech",code:"cs",icon:""},{name:"Esperanto",code:"eo",icon:""},{name:"Spanish",code:"es",icon:""},{name:"Farsi",code:"fa",icon:""},{name:"Hindi",code:"hi",icon:""},{name:"Italian",code:"it",icon:""},{name:"Japanese",code:"ja",icon:""},{name:"Kazakh",code:"kk",icon:""},{name:"Korean",code:"ko",icon:""},{name:"Dutch",code:"nl",icon:""},{name:"Polish",code:"pl",icon:""},{name:"Portuguese",code:"pt",icon:""},{name:"Russian",code:"ru",icon:""},{name:"Turkish",code:"tr",icon:""},{name:"Ukrainian",code:"uk",icon:""},{name:"Uzbek",code:"uz",icon:""},{name:"Vietnamese",code:"vi",icon:""}];class Ve{async getStream(e){return navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,channelCount:1,sampleRate:e}})}}class We{constructor(e){this.source=e??new Ve}async getMicStream(e){return this.source.getStream(e)}}var qe=new We;class Oe{constructor(e){typeof e=="string"?this.sourceElement=document.querySelector(e):this.sourceElement=e}async getStream(){var e,o,r,s;return((o=(e=this.sourceElement)==null?void 0:e.captureStream)==null?void 0:o.call(e))??((s=(r=this.sourceElement)==null?void 0:r.mozCaptureStream)==null?void 0:s.call(r))}}class le{constructor(e){this.element=e}addCaption(e,o,r,s){let n=this.element.addTextTrack("captions",e,o);n.mode="showing",this.track=n,this.addText(0,s??2,r??"Captioned by voice2text!")}addText(e,o,r){this.lastCue&&this.track.removeCue(this.lastCue),this.lastCue=new VTTCue(e,o,r),this.track.addCue(this.lastCue)}clearCaption(){try{this.lastCue&&this.track.removeCue(this.lastCue)}catch{}}}function ue(t,e){t.stream=e;const o=t.audioContext.createMediaStreamSource(e);if(t.audioSource=o,!t.processor){const r=t.audioContext.createScriptProcessor(1024,1,1);r.onaudioprocess=s=>{try{t.recognizer.acceptWaveform(s.inputBuffer)}catch(n){console.error("acceptWaveform failed",n)}},r.connect(t.audioContext.destination),t.processor=r}o.connect(t.processor),t==null||t.audioContext.resume()}class Be{constructor(e){this.language=void 0,this.models={en:"https://voice2text-proxy.mehdiabdi.com/vosk/models/vosk-model-small-en-us-0.15.zip",zh:"https://voice2text-proxy.mehdiabdi.com/vosk/models/vosk-model-small-cn-0.22.zip",ru:"https://voice2text-proxy.mehdiabdi.com/vosk/models/vosk-model-small-ru-0.22.zip",fr:"https://voice2text-proxy.mehdiabdi.com/vosk/models/vosk-model-small-fr-0.22.zip",de:"https://voice2text-proxy.mehdiabdi.com/vosk/models/vosk-model-small-de-zamia-0.3.zip",es:"https://voice2text-proxy.mehdiabdi.com/vosk/models/vosk-model-small-es-0.42.zip",pt:"https://voice2text-proxy.mehdiabdi.com/vosk/models/vosk-model-small-pt-0.3.zip",tr:"https://voice2text-proxy.mehdiabdi.com/vosk/models/vosk-model-small-tr-0.3.zip",vi:"https://voice2text-proxy.mehdiabdi.com/vosk/models/vosk-model-small-vn-0.4.zip",it:"https://voice2text-proxy.mehdiabdi.com/vosk/models/vosk-model-small-it-0.22.zip",nl:"https://voice2text-proxy.mehdiabdi.com/vosk/models/vosk-model-small-nl-0.22.zip",ca:"https://voice2text-proxy.mehdiabdi.com/vosk/models/vosk-model-small-ca-0.4.zip",ar:"https://voice2text-proxy.mehdiabdi.com/vosk/models/vosk-model-ar-mgb2-0.4.zip",uk:"https://voice2text-proxy.mehdiabdi.com/vosk/models/vosk-model-small-uk-v3-nano.zip",kk:"https://voice2text-proxy.mehdiabdi.com/vosk/models/vosk-model-small-kz-0.15.zip",ja:"https://voice2text-proxy.mehdiabdi.com/vosk/models/vosk-model-small-ja-0.22.zip",eo:"https://voice2text-proxy.mehdiabdi.com/vosk/models/vosk-model-small-eo-0.42.zip",hi:"https://voice2text-proxy.mehdiabdi.com/vosk/models/vosk-model-small-hi-0.22.zip",cs:"https://voice2text-proxy.mehdiabdi.com/vosk/models/vosk-model-small-cs-0.4-rhasspy.zip",pl:"https://voice2text-proxy.mehdiabdi.com/vosk/models/vosk-model-small-pl-0.22.zip",uz:"https://voice2text-proxy.mehdiabdi.com/vosk/models/vosk-model-small-uz-0.22.zip",ko:"https://voice2text-proxy.mehdiabdi.com/vosk/models/vosk-model-small-ko-0.22.zip",br:"https://voice2text-proxy.mehdiabdi.com/vosk/models/vosk-model-br-0.8.zip",fa:"https://voice2text-proxy.mehdiabdi.com/vosk/models/vosk-model-small-fa-0.4.zip"},this.languages=Me.filter(o=>{var r;return((r=this.models)==null?void 0:r[o.code])&&o}),this.id=e==null?void 0:e.id,this.language=e==null?void 0:e.language,this.modelUrl=e==null?void 0:e.modelUrl,this.sampleRate=(e==null?void 0:e.sampleRate)??16e3,this.status="OFF",this.source=!e.source||(e==null?void 0:e.source)==="microphone"?"microphone":e.source}async init(){try{if(!this.model&&!this.recognizer&&!this.audioContext){this.newEvent("STATUS","LOADING");const{createModel:e}=await Ie(async()=>{const{createModel:s}=await import("./vosk-JiUq2WHo.js");return{createModel:s}},[],import.meta.url),o=await e(this.language?this.models[this.language]:this.modelUrl);o.setLogLevel(-2);const r=new o.KaldiRecognizer(this.sampleRate);this.model=o,this.recognizer=r,r.on("result",s=>{const n=s.result.text;n&&(this.result=n,this.newEvent("FINAL",n))}),r.on("partialresult",s=>{const n=s.result.partial;n&&this.partialResult!==n&&(this.partialResult=n,this.newEvent("PARTIAL",n))}),this.audioContext=new AudioContext,o&&this.newEvent("STATUS","LOADED")}return!0}catch(e){return console.error(e),!1}}async start(){var e,o;if(this.status==="OFF")await this.init();else if(this.status==="LOADING"){this.delayedStart=!0;try{this.caption=new le(this.source),this.caption.addCaption(`${((e=this.language)==null?void 0:e.toUpperCase())??"ENGLISH"}-voice2text`,this.language??"en","Loading voice2text...",(o=this.source)==null?void 0:o.duration)}catch(r){console.log(r)}return}if(this.status==="LOADED"||this.status==="PAUSED"){const r=this.sampleRate;if(this.source==="microphone")qe.getMicStream(r).then(s=>ue(this,s));else{this.caption||(this.caption=new le(this.source));const n=await new Oe(this.source).getStream();ue(this,n)}this.newEvent("STATUS","STARTED")}}pause(){var e,o;(o=(e=this==null?void 0:this.audioContext)==null?void 0:e.suspend)==null||o.call(e).then(()=>{this.stream.getAudioTracks()[0].stop(),this.audioSource.disconnect(this.processor),this.newEvent("STATUS","PAUSED")})}stop(){var e,o;this.audioContext&&((o=(e=this==null?void 0:this.audioContext)==null?void 0:e.close)==null||o.call(e).then(()=>{this.stream.getAudioTracks()[0].stop(),this.model.terminate(),this.newEvent("STATUS","OFF"),this.model=void 0,this.recognizer=void 0,this.audioContext=void 0,this.audioSource=void 0,this.processor=void 0,this.stream=void 0}))}setLanguage(e){this.stop(),this.language=e==null?void 0:e.language}newEvent(e,o){var s,n;e==="STATUS"&&(this.status=o);const r=new CustomEvent("voice",{detail:{text:o,type:e,id:this.id}});window.dispatchEvent(r),e==="STATUS"&&o==="LOADED"&&(this!=null&&this.delayedStart)&&this.start(),this.source!=="microphone"&&(o==="STARTED"?!this.caption.track&&this.caption.addCaption(`${((s=this.language)==null?void 0:s.toUpperCase())??"ENGLISH"}-voice2text`,this.language??"en"):(e==="PARTIAL"||e==="FINAL")&&this.caption.addText(0,(n=this.source)==null?void 0:n.duration,o))}async trackFetchProgress(e,o,r=1500){const s=e.body.getReader(),n=+e.headers.get("Content-Length");let c=0,h=0,l;l=setInterval(()=>{s.read().then(({done:m,value:i})=>{if(m){clearInterval(l);return}c+=i.length,h!==parseInt((c/n*100).toFixed(0))&&(h=parseInt((c/n*100).toFixed(0)),o(h))})},r)}}class Ke{constructor(e){this.id=(e==null?void 0:e.id)??crypto.getRandomValues(new Uint8Array(16)).toString().replace(/,/g,""),typeof e.source=="string"&&e.source!=="microphone"?this.source=document.querySelector(e.source):this.source=e.source,!(e!=null&&e.converter)||(e==null?void 0:e.converter)==="vosk"?this.converter=new Be({id:this.id,converter:e==null?void 0:e.converter,language:e==null?void 0:e.language,modelUrl:e==null?void 0:e.modelUrl,sampleRate:e==null?void 0:e.sampleRate,source:this.source}):alert("Invalid Converter!"),this.source!=="microphone"&&this.source&&(this.source.addEventListener("play",o=>{this.start()}),this.source.addEventListener("pause",o=>{this.pause()}))}async init(){return this.converter.init()}async start(){return this.converter.start()}stop(){return this.converter.stop()}pause(){return this.converter.pause()}setLanguage(e){return this.converter.setLanguage(e)}}let we=new Ke({converter:"vosk",language:"en",sampleRate:16e3});window.addEventListener("voice",t=>{t.detail.type==="PARTIAL"?console.log("partial result: ",t.detail.text):t.detail.type==="FINAL"?console.log("final result: ",t.detail.text):t.detail.type==="STATUS"&&console.log("status: ",t.detail.text)});we.start();setTimeout(()=>{we.stop()},6e4);function Ge(){const[t,e]=Fe(0);return S(w,null,S("h1",null,"EchoDelphi!        "),S("button",{onClick:()=>e(t+1)},"Start"),S("p",null,"Count: ",t),S("p",null,"EchoDelphi is an application that summarizes a spoken language audio stream and makes a printed summary of it. As an example, the audio of a meeting can be transcribed in realtime, summarized and displayed on a monitor for the meeting participants to see a summary of their meeting so far. That way they can address missi items they still need to discuss."))}const B=Symbol(),K=Symbol(),G=Symbol(),D=Symbol();function E(t,e){function o(...r){if(r.length>=t.length)return t(...r);{const s=(...n)=>o(...r,...n);return s[B]=t,s[K]=o,s[G]=r,s[D]=o[D],s}}return o[B]=t,o[K]=o,o[G]=[],o[D]=e||Qe(t),o}function W(t){return t[B]}function Je(t){return t[K]}function J(t){return t[G]||[]}function Qe(t){return t[D]||t.name}class Xe extends Error{constructor(e){super("Expectation failed"),this.expectArgs=e}}const Ye=E(function(t,e){return t(e)},"which"),R=E(function(t,e){var o,r;if(Ze(t))return t(e);if(Array.isArray(t)&&Array.isArray(e))return t.length===e.length&&t.every((s,n)=>R(t[n],e[n]));if(t instanceof Function&&e instanceof Function)return W(t)&&W(t)===W(e)?R(J(t),J(e)):t===e;if(t instanceof Date&&e instanceof Date)return t.toISOString()===e.toISOString();if(t instanceof Set&&e instanceof Set)return t.size===e.size&&[...t.values()].every(s=>e.has(s));if(t instanceof Error&&e instanceof Error)return t.message===e.message&&t.__proto__.constructor===e.__proto__.constructor;if(de(t)&&de(e)){const s=Object.keys(t),n=Object.keys(e);return s.length===n.length&&s.every(c=>R(t[c],e[c]))&&((o=t.__proto__)==null?void 0:o.constructor)===((r=e.__proto__)==null?void 0:r.constructor)}return t===e},"equals");E(function(t,e){return t===e},"is");E(function(t,e,...o){return!t(e,...o)},"not");E(function(t){return/^\s*$/.test(t)},"isBlank");function de(t){return!!t&&typeof t=="object"}function Ze(t){return t instanceof Function&&Je(t)===Ye&&J(t).length===1}E(function(e,o){return o.slice(0,e.length)===e?o.slice(e.length):o});E(function(e,o){return o instanceof Xe&&R(e,o.expectArgs)});Pe(S(Ge,null),document.getElementById("app"));
